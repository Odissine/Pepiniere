<!DOCTYPE html>
<html lang="fr">
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>{% block title %}La pépinière{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'img/leaf.png' %}" />
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" /> -->
    <link rel="stylesheet" href="{% static 'css/bootstrap-icons.css' %}" />
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- <link href="{% static 'css/base.css' %}" rel="stylesheet"> -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
</head>
<body>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
	<script src="{% static 'js/popper.min.js' %}"></script>
    {% if messages %}
    {% for message in messages %}
    <div aria-live="polite" aria-atomic="true" class="bg-dark position-relative bd-example-toasts">
        <div class="toast-container position-absolute p-3 top-0 end-0" id="toastPlacement">
            <div class="toast fade hide bg-light" id="error_message">
                <div class="toast-header {% if message.tags %} bg-{{ message.tags }} text-light {% endif %}">
                    <strong class="me-auto">Information</strong>
                    <i class="bi-info-circle"></i>
                </div>
                <div class="toast-body">
                    {{ message }}
                </div>
            </div>
        </div>
    </div>
    <script>
        $('#error_message').addClass('show');
        $('#error_message').removeClass('hide');
        function hideMsg () {
            $('#error_message').fadeOut();
            //$('#error_message').removeClass('show');
        }
        setTimeout(hideMsg,3000);
    </script>
    {% endfor %}
    {% endif %}
    <div aria-live="polite" aria-atomic="true" class="bg-dark position-relative bd-example-toasts" id="toastAjax">
        <div class="toast-container position-absolute p-3 top-0 end-0" id="toastPlacementAjax">
            <div class="toast bg-light" id="errorMessageAjax">
                <div class="toast-header text-light" id="toastAjaxHeader">
                    <strong class="me-auto">Information</strong>
                    <i class="bi-info-circle"></i>
                </div>
                <div class="toast-body" id="textErrorMessageAjax"></div>
            </div>
        </div>
    </div>
    <nav class= "navbar navbar-expand-lg navbar-light justify-content-between fixed-top shadow bgheader" aria-label="Menu">
        <div class="container-fluid">
            <a href="/" class="navbar-brand"><img class="img-fluid" src="{% static 'img/leaf.png' %}" /> La pepinière</a>
            <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbar">
                <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0" id="navBarLeft">
                    {% if request.user.is_authenticated %}
                    <li class="nav-item pe-2"><a class="nav-link fs-4" href="/" aria-describedby="tooltip"><i class="{% if request.path == '/' %} text-dark bi-house-fill {% else %}text-secondary bi-house {% endif %} fs-3"></i> Accueil</a></li>
                    <li class="nav-item pe-2"><a class="nav-link fs-4" href="{% url 'onlineshop:produit_list' %}"><i class="{% if '/produit/' in request.path  %} text-dark bi-archive-fill {% else %}text-secondary bi-archive{% endif %} fs-3"></i> Produits</a></li>
                    <li class="nav-item pe-2"><a class="nav-link fs-4" href="{% url 'order:order_list' %}"><i class="{% if '/order/' in request.path  %} text-dark bi-book-fill {% else %}text-secondary bi-book {% endif %} fs-3"></i> Commandes</a></li>
                </ul>
                <ul class="navbar-nav flex-row flex-wrap ms-md-auto"  id="navBarRight">
                    <li class="nav-item pe-2">
                        {% if 'cart' in request.session %}
                        <a href="/cart/" class="nav-link fs-4" id="cartLink">
                            <i class="{% if '/cart/' in request.path  %} text-dark bi-bag-fill {% else %}text-secondary bi-bag {% endif %} fs-3 strong"></i>
                            {% if request.session.cart|length > 0 %}
                            <span class='badge badge-warning' id='lblCartCount'> {{ request.session.cart|length }} </span>
                            {% else %}
                            <span class='badge badge-warning' id='lblCartCount'></span>
                            {% endif %}
                            <span class="textCart">Panier</span>
                        </a>
                        {% else %}
                        <a class="nav-link fs-4" href="/" id="cartLink">
                            <i class="bi-bag text-muted fs-3"></i>
                            <span class='badge badge-warning' id='lblCartCount'></span>
                        </a>
                        {% endif %}
                    </li>
                    {% endif %}
                    {% if request.user.is_authenticated %}
                    <li class="nav-item pe-2">
                        <a class="nav-link fs-4" href="/"><i class="bi bi-person-circle fs-3"></i> <span>{{ user.client.all.0.nom }} {{ user.client.all.0.prenom }}</span></a>
                    </li>
                    {% endif %}
                    <li class="nav-item pe-2">
                    {% if request.user.is_authenticated %}
                        <a class="nav-link fs-4" href="/account/logout">
                            <i class="bi-power text-danger fs-3"></i>
                            <span class="textConnect">Déconnexion</span>
                        </a>
                        {% else %}
                        <a class="nav-link fs-4" href="/account/login">
                            <i class="bi-power text-success fs-3"></i>
                            <span class="textConnect">Connexion</span>
                        </a>
                    {% endif %}
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container py-5">
    <div id="subheader" class="justify-content-end">

    </div>
    <div id="content">
        {% block content %}{% endblock %}
    </div>
</div>
</body>
</html>