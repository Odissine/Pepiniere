<div class="col-lg-12 detail-separator">
    <form class="form-horizontal" action="" method="get" accept-charset="utf-8">
        <h2>Recherche</h2>
      <div class="row g-2">
        <div class="col-md">
            <select id="espece" name="espece" class="form-select form-select-lg my-3" onchange="window.location.href=this.value">
                {% if espece %}
                    <option value="/">Aucune espece</option>
                {% else %}
                    <option selected value=>({{ especes|length }}) Espece</option>
                {% endif %}
                {% for esp in especes %}
                    <option value="{{ esp.get_absolute_url }}" {% if espece and espece == esp %} selected {% endif %}>{{ esp.nom }}</option>
                {% endfor %}
            </select>
        </div>
        {% if espece %}
        <div class="col-md">
                <select id="variete" name="variete" class="form-select form-select-lg my-3" onchange="if (this.value) window.location.href=this.value">
                {% if variete %}
                    <option value="{{ espece.get_absolute_url }}">Aucune variete</option>
                {% else %}
                    <option selected value=>({{ varietes|length }}) Variete</option>
                {% endif %}

                {% for vte in varietes %}
                    <option value="/produit/{{ espece.slug }}/{{ vte.slug }}/" {% if variete and variete == vte %} selected {% endif %}>{{ vte.nom }}</option>
                {% endfor %}
                </select>
        </div>
      </div>
        {% endif %}
        <div class="row g-2">
        {% if variete %}
            <div class="col-md">
                    <select id="portegreffe" name="portegreffe" class="form-select form-select-lg my-3" onchange="if (this.value) window.location.href=this.value">
                    {% if portegreffe %}
                        <option value="/produit/{{ espece.slug }}/{{ variete.slug }}/">Aucun porte greffe</option>
                    {% else %}
                        <option selected value=>({{ portegreffes|length }}) Porte Greffe</option>
                    {% endif %}
                    {% for pg in portegreffes %}
                        <option value="/produit/{{ espece.slug }}/{{ variete.slug }}/{{ pg.slug }}/" {% if portegreffe and portegreffe == pg %} selected {% endif %}>{{ pg.nom }}</option>
                    {% endfor %}
                    </select>
            </div>
        {% endif %}
        {% if portegreffe %}
        <div class="col-md">
                <select id="spec" name="spec" class="form-select form-select-lg my-3" onchange="if (this.value) window.location.href=this.value">
                {% if spec %}
                    <option value="/produit/{{ espece.slug }}/{{ variete.slug }}/{{ portegreffe.slug }}/">Aucun porte greffe</option>
                {% else %}
                    <option selected value=>Specialit√©</option>
                {% endif %}
                {% for sp in specs %}
                    <option value="/produit/{{ espece.slug }}/{{ variete.slug }}/{{ portegreffe.slug }}/{{ sp.slug }}/" {% if spec and spec == sp %} selected {% endif %}>{{ sp.nom }}</option>
                {% endfor %}
                </select>
        </div>
        {% endif %}
      </div>
    </form>
</div>